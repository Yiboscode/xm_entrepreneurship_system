# æœ¬åœ°æµ‹è¯•å’ŒæœåŠ¡å™¨éƒ¨ç½²æŒ‡å—

## ğŸ“‹ ç›®å½•
1. [æœ¬åœ°æµ‹è¯•æµç¨‹](#æœ¬åœ°æµ‹è¯•æµç¨‹)
2. [æœåŠ¡å™¨éƒ¨ç½²æµç¨‹](#æœåŠ¡å™¨éƒ¨ç½²æµç¨‹)
3. [Dockerå®¹å™¨ç®¡ç†](#dockerå®¹å™¨ç®¡ç†)
4. [æ—¥å¿—æŸ¥çœ‹å’Œè°ƒè¯•](#æ—¥å¿—æŸ¥çœ‹å’Œè°ƒè¯•)
5. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ä¸€ã€æœ¬åœ°æµ‹è¯•æµç¨‹

### âœ… ä¼˜ç‚¹
- å¿«é€Ÿè°ƒè¯•ï¼Œä¿®æ”¹å³æ—¶ç”Ÿæ•ˆ
- å¯ä»¥ä½¿ç”¨IDEAæ–­ç‚¹è°ƒè¯•
- å‰ç«¯çƒ­æ›´æ–°ï¼Œå¼€å‘æ•ˆç‡é«˜
- è¿æ¥çœŸå®çš„æœåŠ¡å™¨æ•°æ®åº“

### ğŸ”§ æ­¥éª¤

#### 1. ç¡®è®¤MySQLå·²åœ¨æœåŠ¡å™¨éƒ¨ç½²
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ£€æŸ¥
docker ps | grep mysql
```

#### 2. å¯åŠ¨åç«¯ï¼ˆIDEAä¸­ï¼‰
- æ‰“å¼€ `SpringbootApplication.java`
- ç‚¹å‡»è¿è¡ŒæŒ‰é’®æˆ– `Shift+F10`
- æˆ–è€…ä½¿ç”¨Mavenå‘½ä»¤ï¼š
```bash
cd springboot
mvn spring-boot:run
```

#### 3. å¯åŠ¨å‰ç«¯
æ‰“å¼€æ–°ç»ˆç«¯ï¼š
```bash
cd vue
npm install  # ç¬¬ä¸€æ¬¡éœ€è¦å®‰è£…ä¾èµ–
npm run dev
```

#### 4. è®¿é—®æµ‹è¯•
æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:5173

#### 5. æµ‹è¯•æ¸…å•
- [ ] ç®¡ç†å‘˜ç™»å½•ï¼ˆadmin/adminï¼‰
- [ ] ç”¨æˆ·æ³¨å†Œå’Œç™»å½•
- [ ] æ•™å¸ˆæ³¨å†Œå’Œè®¤è¯
- [ ] åˆ›å»ºé€‰é¢˜
- [ ] æäº¤é€‰é¢˜è¯„ä»·
- [ ] æ–‡ä»¶ä¸Šä¼ ä¸‹è½½
- [ ] é¡¹ç›®ç®¡ç†
- [ ] å›¢é˜Ÿç®¡ç†

---

## äºŒã€æœåŠ¡å™¨éƒ¨ç½²æµç¨‹

### æ–¹å¼Aï¼šå®Œæ•´Dockeréƒ¨ç½²ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

#### 1. æ‰“åŒ…åº”ç”¨
```bash
# æ‰“åŒ…åç«¯
cd springboot
mvn clean package -DskipTests

# æ‰“åŒ…å‰ç«¯
cd vue
npm run build
```

#### 2. ä¸Šä¼ åˆ°æœåŠ¡å™¨
ä½¿ç”¨SFTPå·¥å…·æˆ–å‘½ä»¤ï¼š
```bash
# ä¸Šä¼ æ•´ä¸ªé¡¹ç›®ç›®å½•
scp -r springboot ubuntu@119.29.152.18:~/xm_entrepreneurship_system/
scp -r vue ubuntu@119.29.152.18:~/xm_entrepreneurship_system/
scp deploy/docker-compose.yml ubuntu@119.29.152.18:~/xm_entrepreneurship_system/
```

#### 3. æ„å»ºå¹¶å¯åŠ¨å®¹å™¨
åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š
```bash
cd ~/xm_entrepreneurship_system

# æ„å»ºé•œåƒ
docker build -t entrepreneurship-backend ./springboot
docker build -t entrepreneurship-frontend ./vue

# å¯åŠ¨åç«¯
docker run -d \
  --name entrepreneurship_backend \
  --restart always \
  -p 9090:9090 \
  -v $(pwd)/files:/app/files \
  --link entrepreneurship_mysql:mysql \
  -e SPRING_DATASOURCE_URL=jdbc:mysql://mysql:3306/entrepreneurship_system?useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&useSSL=false&serverTimezone=GMT%2b8&allowPublicKeyRetrieval=true \
  -e SPRING_DATASOURCE_PASSWORD=root123456 \
  entrepreneurship-backend

# å¯åŠ¨å‰ç«¯
docker run -d \
  --name entrepreneurship_frontend \
  --restart always \
  -p 80:80 \
  --link entrepreneurship_backend:backend \
  entrepreneurship-frontend
```

#### 4. éªŒè¯éƒ¨ç½²
```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker ps

# æŸ¥çœ‹æ—¥å¿—
docker logs entrepreneurship_backend
docker logs entrepreneurship_frontend

# è®¿é—®æµ‹è¯•
curl http://localhost:9090/
curl http://localhost/
```

### æ–¹å¼Bï¼šåå°ç›´æ¥è¿è¡Œï¼ˆé€‚åˆè°ƒè¯•ï¼‰

#### 1. ä¸Šä¼ jaråŒ…
```bash
# æœ¬åœ°æ‰“åŒ…
cd springboot
mvn clean package -DskipTests

# ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp target/springboot-0.0.1-SNAPSHOT.jar ubuntu@119.29.152.18:~/xm_entrepreneurship_system/
```

#### 2. ä½¿ç”¨nohupåå°è¿è¡Œ
åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š
```bash
cd ~/xm_entrepreneurship_system

# åå°è¿è¡Œï¼Œæ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶
nohup java -jar springboot-0.0.1-SNAPSHOT.jar > app.log 2>&1 &

# æŸ¥çœ‹è¿›ç¨‹
ps aux | grep java

# æŸ¥çœ‹æ—¥å¿—ï¼ˆå®æ—¶ï¼‰
tail -f app.log

# åœæ­¢åº”ç”¨
# æ‰¾åˆ°è¿›ç¨‹ID
ps aux | grep springboot
# æ€æ­»è¿›ç¨‹
kill <PID>
```

#### 3. ä½¿ç”¨screenä¿æŒä¼šè¯ï¼ˆæ¨èï¼‰
```bash
# å®‰è£…screen
sudo apt install screen

# åˆ›å»ºæ–°ä¼šè¯
screen -S backend

# åœ¨screenä¸­å¯åŠ¨åº”ç”¨
cd ~/xm_entrepreneurship_system
java -jar springboot-0.0.1-SNAPSHOT.jar

# æŒ‰ Ctrl+A ç„¶åæŒ‰ D é€€å‡ºscreenï¼ˆåº”ç”¨ç»§ç»­è¿è¡Œï¼‰

# é‡æ–°è¿æ¥åˆ°screen
screen -r backend

# æŸ¥çœ‹æ‰€æœ‰screenä¼šè¯
screen -ls

# ç»“æŸscreenä¼šè¯
screen -X -S backend quit
```

---

## ä¸‰ã€Dockerå®¹å™¨ç®¡ç†

### å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨
docker ps -a

# æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨
docker ps

# å¯åŠ¨å®¹å™¨
docker start entrepreneurship_backend

# åœæ­¢å®¹å™¨
docker stop entrepreneurship_backend

# é‡å¯å®¹å™¨
docker restart entrepreneurship_backend

# åˆ é™¤å®¹å™¨
docker rm entrepreneurship_backend

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs -f entrepreneurship_backend

# æŸ¥çœ‹æœ€è¿‘100è¡Œæ—¥å¿—
docker logs --tail 100 entrepreneurship_backend

# è¿›å…¥å®¹å™¨
docker exec -it entrepreneurship_backend /bin/bash

# æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨
docker stats

# æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯
docker inspect entrepreneurship_backend
```

### Dockerè‡ªåŠ¨é‡å¯

å®¹å™¨å·²é…ç½® `--restart always`ï¼Œç³»ç»Ÿé‡å¯åä¼šè‡ªåŠ¨å¯åŠ¨ï¼š
- `no`: ä¸è‡ªåŠ¨é‡å¯ï¼ˆé»˜è®¤ï¼‰
- `always`: æ€»æ˜¯é‡å¯
- `on-failure`: åªåœ¨å®¹å™¨éæ­£å¸¸é€€å‡ºæ—¶é‡å¯
- `unless-stopped`: é™¤éæ‰‹åŠ¨åœæ­¢ï¼Œå¦åˆ™æ€»æ˜¯é‡å¯

---

## å››ã€æ—¥å¿—æŸ¥çœ‹å’Œè°ƒè¯•

### 1. åç«¯æ—¥å¿—

#### Dockeræ–¹å¼
```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
docker logs -f entrepreneurship_backend

# æŸ¥çœ‹æœ€è¿‘100è¡Œ
docker logs --tail 100 entrepreneurship_backend

# æŸ¥çœ‹å¸¦æ—¶é—´æˆ³çš„æ—¥å¿—
docker logs -t entrepreneurship_backend

# æŸ¥çœ‹ç‰¹å®šæ—¶é—´çš„æ—¥å¿—
docker logs --since "2024-12-04T10:00:00" entrepreneurship_backend
```

#### nohupæ–¹å¼
```bash
# å®æ—¶æŸ¥çœ‹
tail -f app.log

# æŸ¥çœ‹æœ€è¿‘100è¡Œ
tail -100 app.log

# æœç´¢é”™è¯¯
grep ERROR app.log

# æœç´¢ç‰¹å®šå†…å®¹
grep "å…³é”®è¯" app.log
```

### 2. å‰ç«¯æ—¥å¿—

```bash
# Nginxè®¿é—®æ—¥å¿—
docker exec entrepreneurship_frontend cat /var/log/nginx/access.log

# Nginxé”™è¯¯æ—¥å¿—
docker exec entrepreneurship_frontend cat /var/log/nginx/error.log

# å®æ—¶æŸ¥çœ‹
docker exec entrepreneurship_frontend tail -f /var/log/nginx/access.log
```

### 3. MySQLæ—¥å¿—

```bash
# æŸ¥çœ‹MySQLæ—¥å¿—
docker logs entrepreneurship_mysql

# æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—
docker exec entrepreneurship_mysql cat /var/log/mysql/slow.log
```

### 4. è¿œç¨‹è°ƒè¯•ï¼ˆå¯é€‰ï¼‰

#### å¯ç”¨Javaè¿œç¨‹è°ƒè¯•
```bash
# ä¿®æ”¹å¯åŠ¨å‘½ä»¤ï¼Œæ·»åŠ è°ƒè¯•å‚æ•°
java -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:5005 \
     -jar springboot-0.0.1-SNAPSHOT.jar
```

#### IDEAé…ç½®è¿œç¨‹è°ƒè¯•
1. Run â†’ Edit Configurations
2. æ·»åŠ  â†’ Remote JVM Debug
3. é…ç½®ï¼š
   - Host: 119.29.152.18
   - Port: 5005
4. è®¾ç½®æ–­ç‚¹åï¼Œç‚¹å‡»DebugæŒ‰é’®è¿æ¥

---

## äº”ã€å¸¸è§é—®é¢˜

### Q1: ç»ˆç«¯å…³é—­ååº”ç”¨ä¼šåœæ­¢å—ï¼Ÿ

**A**: çœ‹æƒ…å†µï¼š
- âœ… **Dockerå®¹å™¨**ï¼šä¸ä¼šåœæ­¢ï¼Œåå°æŒç»­è¿è¡Œ
- âœ… **nohupå‘½ä»¤**ï¼šä¸ä¼šåœæ­¢
- âœ… **screenä¼šè¯**ï¼šä¸ä¼šåœæ­¢
- âŒ **ç›´æ¥è¿è¡Œ**ï¼šä¼šåœæ­¢

### Q2: å¦‚ä½•æ›´æ–°åº”ç”¨ï¼Ÿ

```bash
# æ–¹å¼1: Dockeræ›´æ–°
docker stop entrepreneurship_backend
docker rm entrepreneurship_backend
# ä¸Šä¼ æ–°çš„jaråŒ…åé‡æ–°æ„å»º
docker build -t entrepreneurship-backend ./springboot
docker run -d ... entrepreneurship-backend

# æ–¹å¼2: ç›´æ¥æ›¿æ¢jaråŒ…
# ä¸Šä¼ æ–°çš„jaråŒ…
kill <æ—§è¿›ç¨‹PID>
nohup java -jar springboot-0.0.1-SNAPSHOT.jar > app.log 2>&1 &
```

### Q3: å¦‚ä½•å¤‡ä»½æ•°æ®åº“ï¼Ÿ

```bash
# å¯¼å‡ºæ•°æ®åº“
docker exec entrepreneurship_mysql mysqldump \
  -uroot -proot123456 entrepreneurship_system > backup-$(date +%Y%m%d).sql

# æ¢å¤æ•°æ®åº“
docker exec -i entrepreneurship_mysql mysql \
  -uroot -proot123456 entrepreneurship_system < backup-20241204.sql
```

### Q4: ç«¯å£è¢«å ç”¨æ€ä¹ˆåŠï¼Ÿ

```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
sudo netstat -tulpn | grep :9090

# æˆ–ä½¿ç”¨
sudo lsof -i :9090

# æ€æ­»å ç”¨ç«¯å£çš„è¿›ç¨‹
sudo kill -9 <PID>
```

### Q5: å¦‚ä½•æŸ¥çœ‹åº”ç”¨æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Ÿ

```bash
# æ£€æŸ¥åç«¯
curl http://119.29.152.18:9090/

# æ£€æŸ¥MySQLè¿æ¥
docker exec entrepreneurship_mysql mysql -uroot -proot123456 -e "SELECT 1"

# æ£€æŸ¥å‰ç«¯
curl http://119.29.152.18/
```

### Q6: æ–‡ä»¶ä¸Šä¼ ååœ¨å“ªé‡Œï¼Ÿ

```bash
# Dockeræ–¹å¼ï¼ˆæ˜ å°„åˆ°ä¸»æœºï¼‰
ls ~/xm_entrepreneurship_system/files/

# è¿›å…¥å®¹å™¨æŸ¥çœ‹
docker exec -it entrepreneurship_backend ls /app/files/
```

---

## å…­ã€æ¨èçš„å·¥ä½œæµç¨‹

### å¼€å‘é˜¶æ®µ
```
1. æœ¬åœ°IDEAå¯åŠ¨åç«¯ï¼ˆè¿æ¥è¿œç¨‹MySQLï¼‰
2. æœ¬åœ°VSCode/WebStormå¯åŠ¨å‰ç«¯ï¼ˆnpm run devï¼‰
3. æµè§ˆå™¨è®¿é—® localhost:5173 æµ‹è¯•
4. ä½¿ç”¨IDEAæ–­ç‚¹è°ƒè¯•åç«¯
5. ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·è°ƒè¯•å‰ç«¯
```

### éƒ¨ç½²é˜¶æ®µ
```
1. æœ¬åœ°æ‰“åŒ…ï¼ˆmvn package + npm run buildï¼‰
2. ä¸Šä¼ åˆ°æœåŠ¡å™¨
3. ä½¿ç”¨Dockerå¯åŠ¨æ‰€æœ‰æœåŠ¡
4. é…ç½®åŸŸåå’ŒHTTPS
5. è®¾ç½®è‡ªåŠ¨å¤‡ä»½
```

### æ—¥å¸¸ç»´æŠ¤
```
1. å®šæœŸæŸ¥çœ‹æ—¥å¿—ï¼šdocker logs
2. ç›‘æ§å®¹å™¨çŠ¶æ€ï¼šdocker ps
3. å¤‡ä»½æ•°æ®åº“ï¼šmysqldump
4. æ›´æ–°åº”ç”¨ï¼šæ›¿æ¢jar/é•œåƒ
```

---

## ä¸ƒã€ä¸€é”®è„šæœ¬

### ä¸€é”®å¯åŠ¨å¼€å‘ç¯å¢ƒï¼ˆæœ¬åœ°ï¼‰
åˆ›å»º `start-dev.sh`:
```bash
#!/bin/bash
echo "å¯åŠ¨å¼€å‘ç¯å¢ƒ..."

# å¯åŠ¨åç«¯ï¼ˆåå°ï¼‰
cd springboot
nohup mvn spring-boot:run > ../backend.log 2>&1 &
BACKEND_PID=$!
echo "åç«¯PID: $BACKEND_PID"

# ç­‰å¾…åç«¯å¯åŠ¨
sleep 10

# å¯åŠ¨å‰ç«¯
cd ../vue
npm run dev
```

### ä¸€é”®éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼ˆæœåŠ¡å™¨ï¼‰
åˆ›å»º `deploy-all.sh`:
```bash
#!/bin/bash
set -e

echo "=== å¼€å§‹éƒ¨ç½² ==="

# æ„å»ºé•œåƒ
echo "æ„å»ºåç«¯é•œåƒ..."
docker build -t entrepreneurship-backend ./springboot

echo "æ„å»ºå‰ç«¯é•œåƒ..."
docker build -t entrepreneurship-frontend ./vue

# åœæ­¢æ—§å®¹å™¨
echo "åœæ­¢æ—§å®¹å™¨..."
docker stop entrepreneurship_backend entrepreneurship_frontend 2>/dev/null || true
docker rm entrepreneurship_backend entrepreneurship_frontend 2>/dev/null || true

# å¯åŠ¨æ–°å®¹å™¨
echo "å¯åŠ¨MySQL..."
docker start entrepreneurship_mysql || docker run -d \
  --name entrepreneurship_mysql \
  --restart always \
  -e MYSQL_ROOT_PASSWORD=root123456 \
  -e MYSQL_DATABASE=entrepreneurship_system \
  -p 3306:3306 \
  -v mysql_data:/var/lib/mysql \
  mysql:8.0

sleep 10

echo "å¯åŠ¨åç«¯..."
docker run -d \
  --name entrepreneurship_backend \
  --restart always \
  -p 9090:9090 \
  -v $(pwd)/files:/app/files \
  --link entrepreneurship_mysql:mysql \
  entrepreneurship-backend

sleep 5

echo "å¯åŠ¨å‰ç«¯..."
docker run -d \
  --name entrepreneurship_frontend \
  --restart always \
  -p 80:80 \
  --link entrepreneurship_backend:backend \
  entrepreneurship-frontend

echo "=== éƒ¨ç½²å®Œæˆ ==="
docker ps
```

---

## ğŸ¯ æ€»ç»“

**æ¨èæµç¨‹**ï¼š
1. âœ… **å¼€å‘æ—¶**ï¼šæœ¬åœ°IDEA+VSCodeï¼Œè¿æ¥è¿œç¨‹MySQL
2. âœ… **æµ‹è¯•é€šè¿‡å**ï¼šæ‰“åŒ…ä¸Šä¼ ï¼ŒDockeréƒ¨ç½²åˆ°æœåŠ¡å™¨
3. âœ… **æ—¥å¸¸ç»´æŠ¤**ï¼šdocker logsæŸ¥çœ‹æ—¥å¿—ï¼Œscreenä¼šè¯ä¸´æ—¶è°ƒè¯•

Dockerå®¹å™¨ä¼šä¸€ç›´åå°è¿è¡Œï¼Œä¸éœ€è¦ä¿æŒç»ˆç«¯æ‰“å¼€ï¼ ğŸš€

